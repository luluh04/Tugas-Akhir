<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kerucut Interaktif</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body class="kerucut">   
<button id="btn-kembali" onclick="window.location.href='sisilengkung.html'">‚Üê</button>
<audio id="myAudio" src="assets/cheerful-joyful-playful-music-381499.mp3" autoplay loop></audio>
  <!-- Tooltip -->
  <div id="tooltip">
    <div class="tooltip-title">Sifat-sifat Kerucut</div> 
    <div>
      <ul>
        <li>Memiliki 2 sisi, yaitu 1 sisi alas berbentuk lingkaran dan 1 sisi selimut berbentuk lengkung</li>
        <li>Memiliki 1 rusuk melingkar (lingkaran pada alas)</li>
        <li>Memiliki 1 titik puncak (titik tertinggi kerucut)</li>
        <li>Tidak memiliki titik sudut</li>
        <li>Volume = (1/3) √ó œÄ √ó r¬≤ √ó t, Luas Permukaan = œÄ √ó r √ó (r + s)</li>
      </ul>
    </div>
  </div>
  <div id="tooltip-drag" class="tooltip"></div>


  <!-- Kontainer -->
  <div class="container-kerucut">
    <div id="container-kerucut1"></div>
    <div id="container-kerucut2"></div>
    <div id="geogebra-container" style="display: none; margin-top: 20px;">
  <iframe 
    src="https://www.geogebra.org/material/iframe/id/yzGzrUxs/width/800/height/600/border/888888/rc/false/ai/false"
    width="1000" 
    height="1000" 
    style="border: 0;">
  </iframe>
</div>
<div id="container-kerucut3">
  <div id="canvas-kerucut3"></div>
<form id="hasil-perhitungan-kerucut3" style="color: black;">
    <div class="form-group">
      <label for="volume-kerucut3">Volume:</label>
      <p id="volume-kerucut3" class="readonly-output">-</p>
    </div>
    <div class="form-group">
      <label for="luas-kerucut3">Luas Permukaan:</label>
      <p id="luas-kerucut3" class="readonly-output">-</p>
    </div>
  </form>
</div>
  </div>

  <!-- Tombol reset di bawah -->
<div class="bottom-buttons">
  <button id="explain-button">Penjelasan</button>
  <button id="guide-button">Panduan</button>
  <button onclick="tampilkanGeoGebra()">Tampilkan Pola Kerucut</button>
  <button onclick="tampilkanKerucut(1)">Tampilkan Kerucut 1</button>
  <button onclick="tampilkanKerucut(2)">Tampilkan Kerucut 2</button>
  <button onclick="resetSisi()">Reset Kerucut 2</button>
  <div>
  <input type="number" id="input-jari-kerucut3" placeholder="Jari-jari alas (cm)">
<input type="number" id="input-tinggi-kerucut3" placeholder="Tinggi kerucut (cm)">
<button onclick="tampilkanKerucut(3)">Tampilkan Kerucut 3</button>
<!-- <div id="hasil-perhitungan-kubus3" style="color: black;"></div> -->
</div>
</div>
<!-- Modal penjelasan -->
<div id="modal-explain" class="modal">
  <div class="modal-content">
    <span class="close" data-close="modal-explain">&times;</span>

    <!-- Karakter animasi -->
    <!-- <div class="character">
      <img src="assets/square.png" alt="Karakter" />
    </div> -->

    <!-- Teks penjelasan -->
    <div class="penjelasan-teks">
      <h2>Penjelasan Kerucut</h2>
            <p>
  Kerucut adalah bangun ruang tiga dimensi yang memiliki satu alas berbentuk <strong>lingkaran</strong> dan satu titik puncak yang tidak terletak pada bidang alas. Sisi lengkungnya melengkung dari keliling alas ke puncak, membentuk permukaan melingkar yang disebut <strong>selimut kerucut</strong>.
</p>

<p><strong>Ciri-ciri Kerucut:</strong></p>
<ul>
  <li>Memiliki satu alas berbentuk lingkaran.</li>
  <li>Memiliki satu titik puncak di luar bidang alas.</li>
  <li>Memiliki satu sisi lengkung yang disebut selimut kerucut.</li>
  <li>Tidak memiliki rusuk, namun memiliki <em>garis pelukis</em> (garis dari tepi alas ke puncak).</li>
  <li>Tinggi kerucut adalah jarak tegak lurus dari pusat alas ke puncak.</li>
</ul>

<p><strong>Elemen-elemen pada Kerucut:</strong></p>
<ul>
  <li><strong>r</strong>: jari-jari alas (lingkaran)</li>
  <li><strong>t</strong>: tinggi kerucut</li>
  <li><strong>s</strong>: garis pelukis (panjang selimut kerucut)</li>
</ul>

<p><strong>Rumus:</strong></p>
<ul>
  <li><strong>Volume</strong> = (1/3) √ó œÄ √ó r¬≤ √ó t</li>
  <li><strong>Luas Permukaan</strong> = œÄ √ó r √ó (r + s)</li>
</ul>
<p>
  Di mana œÄ ‚âà 3.14, <em>r</em> adalah jari-jari alas, <em>t</em> tinggi kerucut, dan <em>s</em> adalah panjang garis pelukis (dihitung dengan rumus <strong>s = ‚àö(r¬≤ + t¬≤)</strong>).
</p>

<p><strong>Contoh Penerapan Kerucut dalam Kehidupan Sehari-hari:</strong></p>
<ul>
  <li>Topi ulang tahun berbentuk kerucut.</li>
  <li>Corong minyak atau air.</li>
  <li>Kerucut lalu lintas (traffic cone).</li>
  <li>Es krim cone.</li>
  <li>Menara atau atap berbentuk runcing seperti kerucut.</li>
</ul>

    </div>
  </div>
</div>

<!-- Modal Panduan -->
<div id="modal-guide" class="modal">
  <div class="modal-content">
    <span class="close" data-close="modal-guide">&times;</span>
    <h2>Panduan Penggunaan</h2>
    <ol>
  <li>Klik menu <strong>Tampilkan Kerucut 1 dan 2</strong> untuk menampilkan kedua kerucut dalam tampilan interaktif.</li>
  
  <li><strong>Kerucut 1</strong> dapat diputar dengan klik dan drag menggunakan mouse atau touchpad untuk melihat bentuk kerucut dari berbagai sudut pandang.</li>
  
  <li>Arahkan kursor ke bagian-bagian Kerucut 1 (alas, selimut, puncak) untuk melihat tooltip yang menampilkan informasi seperti jari-jari, tinggi, dan panjang garis pelukis.</li>
  
  <li><strong>Kerucut 2</strong> terdiri dari bagian alas dan selimut yang dapat di-drag atau digeser. Pengguna dapat menyusun ulang bagian-bagian tersebut untuk memahami jaring-jaring kerucut secara visual.</li>
  
  <li>Gunakan tombol <strong>Reset Kerucut 2</strong> untuk mengembalikan semua bagian Kerucut 2 ke posisi semula sebelum disusun ulang.</li>
  
  <li>Masukkan nilai <strong>r</strong> (jari-jari) dan <strong>t</strong> (tinggi) untuk menampilkan <strong>Kerucut 3</strong> dengan ukuran sesuai input pengguna. Kerucut akan ditampilkan lengkap dengan garis pelukis dan alasnya.</li>
  
  <li>Klik tombol <strong>Penjelasan</strong> untuk membaca informasi umum tentang kerucut, seperti ciri-ciri, elemen kerucut, rumus volume dan luas permukaan, serta bagaimana bentuk kerucut terbentuk dari rotasi setengah lingkaran.</li>
  
  <li>Klik tombol <strong>Pola Kerucut</strong> untuk menampilkan <em>jaring-jaring kerucut</em> berupa lingkaran (alas) dan juring lingkaran (selimut). Jaring ini dapat di-drag atau digeser menggunakan slider untuk memahami bagaimana kerucut terbentuk dari bagian-bagian tersebut.</li>
</ol>
  </div>
</div>
<script>
const tooltip = document.getElementById("tooltip");
const tooltipDrag = document.getElementById("tooltip-drag");

// === KERUCUT 1 ===
const container1 = document.getElementById("container-kerucut1");
const scene1 = new THREE.Scene();
const camera1 = new THREE.PerspectiveCamera(75, container1.clientWidth / container1.clientHeight, 0.1, 1000);
const renderer1 = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer1.setClearColor(0x000000, 0);
container1.appendChild(renderer1.domElement);

function resizeRenderer() {
  const width = container1.clientWidth;
  const height = container1.clientHeight;
  renderer1.setSize(width, height);
  camera1.aspect = width / height;
  camera1.updateProjectionMatrix();
}

resizeRenderer(); // panggil saat awal
window.addEventListener('resize', resizeRenderer);

const controls1 = new THREE.OrbitControls(camera1, renderer1.domElement);
camera1.position.set(1, 3, 1);
camera1.lookAt(0, 0, 0); // <‚Äî Tambahan penting agar kamera langsung menghadap ke balok
controls1.update();
scene1.add(new THREE.AmbientLight(0xffffff, 1));

function createNumberTexture(number, textColor = "#ffffff") {
  const size = 256;
  const canvas = document.createElement("canvas");
  canvas.width = size;
  canvas.height = size;
  const ctx = canvas.getContext("2d");

  ctx.fillStyle = textColor;
  ctx.font = "bold 120px Arial";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(number.toString(), size / 2, size / 2);

  return new THREE.CanvasTexture(canvas);
}


const radius = 1;
const height = 1.5;

// === SELIMUT KERUCUT ===
const coneGeometry = new THREE.ConeGeometry(radius, height, 64, 1, true); // true = tanpa alas
const coneMaterial = new THREE.MeshBasicMaterial({
  color: 0xffa500,
  side: THREE.DoubleSide,
  transparent: true,
  opacity: 0.6
});
const cone = new THREE.Mesh(coneGeometry, coneMaterial);
cone.position.y = 0; // Titik tengah kerucut di Y = 0
scene1.add(cone);

// === ALAS KERUCUT ===
const circleGeometry = new THREE.CircleGeometry(radius, 64);
const circleMaterial = new THREE.MeshBasicMaterial({
  color: 0xff0000,
  side: THREE.DoubleSide,
  transparent: true,
  opacity: 0.4
});
const baseCircle = new THREE.Mesh(circleGeometry, circleMaterial);
baseCircle.rotation.x = -Math.PI / 2; // menghadap ke atas
baseCircle.position.y = -height / 2;
scene1.add(baseCircle);


function createNumberTexture(number, textColor = "#000000", bgColor = "#ffffff") {
  const size = 256;
  const canvas = document.createElement("canvas");
  canvas.width = size;
  canvas.height = size;
  const ctx = canvas.getContext("2d");
  ctx.fillStyle = bgColor;
  ctx.fillRect(0, 0, size, size);
  ctx.fillStyle = textColor;
  ctx.font = "bold 120px Arial";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(number, size / 2, size / 2);
  const texture = new THREE.CanvasTexture(canvas);
  return texture;
}

const labelSelimutTexture = createNumberTexture("2", "#000000", "#ffffff");
const labelSelimutMaterial = new THREE.MeshBasicMaterial({
  map: labelSelimutTexture,
  transparent: true,
  side: THREE.DoubleSide,
}); //supaya bisa terlihat walaupun di rotate
const labelSelimut = new THREE.Mesh(new THREE.PlaneGeometry(0.4, 0.4), labelSelimutMaterial);
const tip = new THREE.Vector3(0, height / 2, 0); // titik puncak kerucut

// Tempatkan di depan selimut dengan sudut miring (ikuti arah dari alas ke puncak)
const selimutDir = new THREE.Vector3().subVectors(tip, new THREE.Vector3(0, -height / 2, radius)).normalize();
const selimutPos = new THREE.Vector3(0, 0, radius * 0.7); // sedikit ke atas

labelSelimut.position.copy(selimutPos);
scene1.add(labelSelimut);

// === LABEL 2: Alas Kerucut ===
const labelAlasTexture = createNumberTexture("1", "#000000", "#ffffff");
const labelAlasMaterial = new THREE.MeshBasicMaterial({
  map: labelAlasTexture,
  transparent: true,
  side: THREE.DoubleSide,
});
const labelAlas = new THREE.Mesh(new THREE.PlaneGeometry(0.4, 0.4), labelAlasMaterial);

// Tempatkan di tengah alas
labelAlas.position.set(0, -height / 2 + 0.01, 0);
labelAlas.rotation.x = -Math.PI / 2; // menghadap ke atas (horizontal)

scene1.add(labelAlas);


// Raycaster untuk tooltip
const raycaster1 = new THREE.Raycaster();
const mouse1 = new THREE.Vector2();

container1.addEventListener("mousemove", (event) => {
  const rect = container1.getBoundingClientRect();
  mouse1.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
  mouse1.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

  raycaster1.setFromCamera(mouse1, camera1);
  const intersects = raycaster1.intersectObjects(scene1.children, true);

  if (intersects.length === 0) {
    tooltip.style.display = "none";
    return;
  }

  const obj = intersects[0].object;
  const info = obj.userData.info || "Kerucut";

  tooltip.style.left = event.clientX + 100 + "px"; //kanan
  tooltip.style.top = event.clientY - 5 + "px";// bawah
  tooltip.innerHTML = `
    <div class="tooltip-title">üî∫ Kerucut</div>
    <ul>
      <li>Memiliki 1 titik sudut (puncak)</li>
      <li>Memiliki 1 sisi alas berbentuk lingkaran</li>
      <li>Memiliki 1 sisi lengkung (selimut)</li>
      <li>Rusuk melengkung terbentuk dari puncak ke keliling alas</li>
      <li>Volume = (1/3) √ó œÄ √ó r¬≤ √ó t</li>
      <li>Luas Permukaan = œÄ √ó r √ó (r + s)</li>
    </ul>
    <hr>
    <strong>Info:</strong> ${info}
  `;
  tooltip.style.display = "block";
});

// Animate
function animate() {
  requestAnimationFrame(animate);
  controls1.update();
  renderer1.render(scene1, camera1);
}
animate();



// === kerucut 2 ===
const container2 = document.getElementById("container-kerucut2");
const scene2 = new THREE.Scene();
const camera2 = new THREE.PerspectiveCamera(75, container2.clientWidth / container2.clientHeight, 0.1, 1000);
camera2.position.set(0, 0, 5);

const renderer2 = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer2.setClearColor(0x000000, 0);
renderer2.setSize(container2.clientWidth, container2.clientHeight);
container2.appendChild(renderer2.domElement);

function resize() {
  const width = container2.clientWidth;
  const height = container2.clientHeight;
  renderer2.setSize(width, height);
  camera2.aspect = width / height;
  camera2.updateProjectionMatrix();
}
window.addEventListener('resize', resize);
resize();

// Ukuran kerucut
const jariJari = 1.5;
const tinggi = 3;
const radialSegments = 64;
function createNumberTexture(number) {
  const size = 256;
  const canvas = document.createElement("canvas");
  canvas.width = size;
  canvas.height = size;
  const ctx = canvas.getContext("2d");
  ctx.fillStyle = "#000000";
  ctx.font = "bold 140px Arial";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(number, size / 2, size / 2);
  return new THREE.CanvasTexture(canvas);
}
// Nama dan warna untuk bagian-bagian kerucut
const faceColors = [0xff0000, 0xffa500]; // alas dan selimut
const faceNames = ["Alas", "Selimut"];
const faceNumbers2 = [1, 2];

const faceSizes = [
  [jariJari * 2, jariJari * 2], // alas (lingkaran)
  [Math.PI * jariJari, tinggi]  // selimut (segitiga/lembaran)
];

const facePositions = [
  [0, -tinggi / 2, 0],  // alas menghadap ke bawah
  [0, 0, 0]             // selimut berdiri tegak
];

const faceRotations = [
  [-Math.PI / 2, 0, 0], // alas horizontal
  [0, 0, 0]             // selimut berdiri
];

const sides = [], originalPositions = [], originalRotations = [];

facePositions.forEach((pos, i) => {
  const number = faceNumbers2[i];
  let geometry;

  if (i === 0) {
    // Alas: lingkaran horizontal
    geometry = new THREE.CircleGeometry(jariJari, 64);
  } else {
    // Selimut: Kerucut melengkung
    geometry = new THREE.ConeGeometry(jariJari, tinggi, 64, 1, true);
  }

  const material = new THREE.MeshBasicMaterial({
    color: faceColors[i],
    transparent: true,
    opacity: 0.6,
    side: THREE.DoubleSide
  });

  const side = new THREE.Mesh(geometry, material);
  side.position.set(...pos);
  side.rotation.set(...faceRotations[i]);
  side.name = faceNames[i];
  side.userData = { type: "face", info: `Sisi ${number}` };

  originalPositions.push([...pos]);
  originalRotations.push([...faceRotations[i]]);

  const border = new THREE.LineSegments(
    new THREE.EdgesGeometry(geometry),
    new THREE.LineBasicMaterial({ color: 0x000000 })
  );
  side.add(border);

// Penempatan angka yang mengikuti orientasi sisi
const numberTexture = createNumberTexture(i + 1);
const numberMaterial = new THREE.MeshBasicMaterial({
  map: numberTexture,
  transparent: true,
  side: THREE.DoubleSide,
  depthTest: false,
});

const numberPlane = new THREE.Mesh(
  new THREE.PlaneGeometry(0.5, 0.5),
  numberMaterial
);

const isAlas = (i === 0); // indeks 0 untuk alas

numberPlane.position.set(
  0,
  isAlas ? 0.07 : tinggi / 2,
  isAlas ? 0 : jariJari / 2
);

numberPlane.rotation.set(
  isAlas ? Math.PI / 25 : 0,
  0,
  0
);


// Tambahkan ke sisi
side.add(numberPlane);
scene2.add(side);
sides.push(side);
});

const originalPositions2 = sides.map(side => side.position.clone());
const originalRotations2 = sides.map(side => side.rotation.clone());
const originalGeometries = sides.map(side => side.geometry.clone());


// (Setelah semua kode setup balok1 dan kerucut2)

// Animasi untuk balok interaktif (balok 1)
function animateKerucut1() {
  requestAnimationFrame(animateKerucut1);
  controls1.update(); // OrbitControls agar bisa rotasi/zoom
  renderer1.render(scene1, camera1);
}
animateKerucut1();

// Animasi untuk balok net (balok 2)
function animateKerucut2() {
  requestAnimationFrame(animateKerucut2);
  renderer2.render(scene2, camera2);
}
animateKerucut2();


// === Interaksi drag sisi
const raycaster2 = new THREE.Raycaster();
const mouse2 = new THREE.Vector2();
let selectedSide = null;
let isDragging = false;

container2.addEventListener("pointerdown", (event) => {
  const rect = container2.getBoundingClientRect();
  mouse2.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
  mouse2.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
  raycaster2.setFromCamera(mouse2, camera2);
  const intersects = raycaster2.intersectObjects(sides);
  if (intersects.length > 0) {
    selectedSide = intersects[0].object;
    isDragging = true;
    tooltipDrag.innerHTML = `<div class='tooltip-title'>üî∑ ${selectedSide.name}</div><p>Drag sisi ini</p>`;
    tooltipDrag.style.left = event.clientX + 20 + 'px';
    tooltipDrag.style.top = event.clientY + 20 + 'px';
    tooltipDrag.style.display = 'block';
  }
  if (
  selectedSide &&
  selectedSide.name === "Selimut" &&
  !selectedSide.userData.flattened
) {
  // Hitung data sektor
  const sisiMiring = Math.sqrt(jariJari ** 2 + tinggi ** 2);
  const sudutDerajat = (jariJari / sisiMiring) * 360;
  const sudutRad = THREE.MathUtils.degToRad(sudutDerajat);

  // Buat sektor lingkaran sebagai Shape
  const shape = new THREE.Shape();
  shape.moveTo(0, 0);
  shape.absarc(0, 0, sisiMiring, 0, sudutRad, false);
  shape.lineTo(0, 0);

  const newGeometry = new THREE.ShapeGeometry(shape, 64);
  selectedSide.geometry.dispose();
  selectedSide.geometry = newGeometry;

  // Tandai sudah diflatten agar tidak diubah ulang
  selectedSide.userData.flattened = true;

  // Hapus border & angka lama
  selectedSide.children.forEach(child => {
    if (child.type === "LineSegments" || (child.type === "Mesh" && child.geometry.type.includes("Plane"))) {
      selectedSide.remove(child);
    }
  });

  // Tambahkan border baru
  const newBorder = new THREE.LineSegments(
    new THREE.EdgesGeometry(newGeometry),
    new THREE.LineBasicMaterial({ color: 0x000000 })
  );
  selectedSide.add(newBorder);

  // Tambahkan angka
  const numberTexture = createNumberTexture(2);
  const numberMaterial = new THREE.MeshBasicMaterial({ map: numberTexture, transparent: true });
  const numberPlane = new THREE.Mesh(new THREE.PlaneGeometry(0.5, 0.5), numberMaterial);

  // Tempatkan angka di tengah sektor
  numberPlane.position.set(sisiMiring / 2.5, 0.05, 0);
  numberPlane.rotation.x = -Math.PI / 2;
  selectedSide.add(numberPlane);
}

});

container2.addEventListener("pointermove", (event) => {
  if (selectedSide && isDragging) {
    selectedSide.position.x += event.movementX * 0.005;
    selectedSide.position.y -= event.movementY * 0.005;
    selectedSide.rotation.set(0, 0, 0);
    tooltipDrag.style.left = event.clientX + 20 + 'px';
    tooltipDrag.style.top = event.clientY + 20 + 'px';
  }
});

container2.addEventListener("pointerup", () => {
  selectedSide = null;
  isDragging = false;
  tooltipDrag.style.display = 'none';
});

function resetSisi() {
  sides.forEach((side, i) => {
    side.clear(); // hapus semua anak (angka & border)

    // Buat ulang mesh dari awal
    const geometry = originalGeometries[i].clone();
    const material = new THREE.MeshBasicMaterial({
      color: faceColors[i],
      transparent: true,
      opacity: 0.6,
      side: THREE.DoubleSide
    });

    const newSide = new THREE.Mesh(geometry, material);
    newSide.position.set(...originalPositions[i]);
    newSide.rotation.set(...originalRotations[i]);
    newSide.name = faceNames[i];
    newSide.userData = { type: "face", info: `Sisi ${faceNumbers2[i]}` };

    // Tambah border baru
    const border = new THREE.LineSegments(
      new THREE.EdgesGeometry(geometry),
      new THREE.LineBasicMaterial({ color: 0x000000 })
    );
    newSide.add(border);

    // Tambah nomor
    const numberTexture = createNumberTexture(faceNumbers2[i]);
    const numberMaterial = new THREE.MeshBasicMaterial({
      map: numberTexture,
      transparent: true,
      side: THREE.DoubleSide,
      depthTest: false,
    });

    const numberPlane = new THREE.Mesh(
      new THREE.PlaneGeometry(0.5, 0.5),
      numberMaterial
    );

    // Atur posisi & rotasi berdasarkan jenis sisi
const isAlas = (i === 0); // indeks 0 untuk alas
numberPlane.position.set(
  0,
  isAlas ? 0.07 : tinggi / 2,
  isAlas ? 0 : jariJari / 2
);

numberPlane.rotation.set(
  -Math.PI / 2, // alas horizontal
  0,
  Math.PI       // putar agar angka tidak terbalik
);

numberPlane.rotation.set(
  isAlas ? Math.PI / 2 : 0,
  0,
  0
);

    newSide.add(numberPlane);

    // Ganti objek lama dengan yang baru
    scene2.remove(sides[i]);
    scene2.add(newSide);
    sides[i] = newSide;
  });
}


let scene3, camera3, renderer3, mesh3, controls3;
let isFirstTime = true;

function buatKerucut3() {
  const jari = parseFloat(document.getElementById("input-jari-kerucut3").value);
  const tinggi = parseFloat(document.getElementById("input-tinggi-kerucut3").value);

  if (isNaN(jari) || isNaN(tinggi) || jari <= 0 || tinggi <= 0) {
    alert("Masukkan jari-jari dan tinggi yang valid.");
    return;
  }

  const container = document.getElementById("container-kerucut3");

  // Inisialisasi scene, camera, renderer
  if (isFirstTime) {
    scene3 = new THREE.Scene();

    camera3 = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
    camera3.position.z = 10;

    renderer3 = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    const width = container.clientWidth;
    const height = container.clientHeight;

    renderer3.setSize(width, height);
    camera3.aspect = width / height;
    camera3.updateProjectionMatrix();

    document.getElementById("canvas-kerucut3").appendChild(renderer3.domElement);

    controls3 = new THREE.OrbitControls(camera3, renderer3.domElement);
    controls3.enableDamping = true;

    animate3();
    isFirstTime = false;
  }

  // Hapus mesh lama
  if (mesh3) {
    scene3.remove(mesh3);
  }

  // Buat kerucut
const geometry = new THREE.ConeGeometry(jari, tinggi, 64); // 64 segmen agar halus
const material = new THREE.MeshPhongMaterial({     
  transparent: true,
    opacity: 0.2,
    side: THREE.DoubleSide,
});
mesh3 = new THREE.Mesh(geometry, material);
const edges = new THREE.EdgesGeometry(geometry);
const lineMaterial = new THREE.LineBasicMaterial({ color: 0x000000 });
const lineSegments = new THREE.LineSegments(edges, lineMaterial);
mesh3.add(lineSegments);

scene3.add(mesh3);


  // Hitung volume dan luas permukaan
  const phi = Math.PI;
  const s = Math.sqrt(jari * jari + tinggi * tinggi); // garis pelukis
  const volume = (1 / 3) * phi * jari * jari * tinggi;
  const luas = phi * jari * (jari + s);

  document.getElementById("volume-kerucut3").textContent = `${volume.toFixed(2)} cm¬≥`;
  document.getElementById("luas-kerucut3").textContent = `${luas.toFixed(2)} cm¬≤`;
}

function animate3() {
  requestAnimationFrame(animate3);
  if (mesh3) {
    mesh3.rotation.x += 0.01;
    mesh3.rotation.y += 0.01;
  }
  renderer3.render(scene3, camera3);
  controls3.update();
}


window.onload = function () {
  document.getElementById("explain-button").addEventListener("click", function () {
    document.getElementById("modal-explain").style.display = "block";
  });

  document.getElementById("guide-button").addEventListener("click", function () {
    document.getElementById("modal-guide").style.display = "block";
  });

  document.querySelectorAll(".close").forEach(function (btn) {
    btn.addEventListener("click", function () {
      const modalId = btn.getAttribute("data-close");
      document.getElementById(modalId).style.display = "none";
    });
  });
};
// Fungsi untuk menutup modal berdasarkan ID
  document.querySelectorAll(".close").forEach(function (closeBtn) {
    closeBtn.addEventListener("click", function () {
      const targetId = this.getAttribute("data-close");
      const modal = document.getElementById(targetId);
      if (modal) {
        modal.style.display = "none";
      }
    });
  });

  // Menutup modal saat klik di luar konten
  window.addEventListener("click", function (event) {
    document.querySelectorAll(".modal").forEach(function (modal) {
      if (event.target === modal) {
        modal.style.display = "none";
      }
    });
  });

function tampilkanKerucut(nomor) {
  const kerucut1 = document.getElementById("container-kerucut1");
  const kerucut2 = document.getElementById("container-kerucut2");
  const kerucut3 = document.getElementById("container-kerucut3");
  const geogebra = document.getElementById("geogebra-container");

  kerucut1.classList.remove("aktif");
  kerucut2.classList.remove("aktif");
  kerucut3.style.display = "none";
  geogebra.style.display = "none";

  // Tampilkan sesuai pilihan
  if (nomor === 1) kerucut1.classList.add("aktif");
  else if (nomor === 2) kerucut2.classList.add("aktif");
  else if (nomor === 3) {
    kerucut3.style.display = "block";
    buatKerucut3();
  }
}

document.addEventListener("DOMContentLoaded", () => {
  tampilkanKerucut(1);
});

function tampilkanGeoGebra() {
  const kerucut1 = document.getElementById("container-kerucut1");
  const kerucut2 = document.getElementById("container-kerucut2");
  const container = document.getElementById('geogebra-container');

  kerucut1.classList.remove("aktif");
  kerucut2.classList.remove("aktif");
  container.style.display = 'block';
}


  </script>

</body>
</html>
